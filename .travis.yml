language: python

arch:
  - arm64

python:
  - 3.7

env:
  - VERSION=0.0.1

addons:
  apt:
    packages:
      - libblas-dev
      - liblapack-dev
      - libatlas-base-dev
      - gfortran

services:
  - docker

before_install:
  - sudo chown -Rv $USER:$GROUP ~/.cache/pip/wheels
#  - sudo apt-get update
#  - sudo apt-get install libblas-dev liblapack-dev libatlas-base-dev gfortran

install:
  - pip install --upgrade pip
  - pip install --upgrade pip setuptools wheel
  - pip install pychalk matplotlib pyfiglet sklearn numpy
  - pip install coveralls

script:
  - docker build -t nettle:$VERSION .

after_success:
  - coveralls

deploy:
  provider: script
  script: bash docker_push
  on:
    branch: master

notifications:
  email: false